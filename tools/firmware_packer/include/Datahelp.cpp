
#include "stdafx.h"


#include "..\\common\\ytypes.h"

#include "datahelp.h"


//------------------------------------------------------------------------------------------------
// x86 是LSB系统
//------------------------------------------------------------------------------------------------
//
//
//
//------------------------------------------------------------------------------------------------
u32 u32toLSB(u32 word)
{
	u32 data = word;
	return data;
}
//------------------------------------------------------------------------------------------------
//
//
//
//------------------------------------------------------------------------------------------------
u16 u16toLSB(u16 half)
{
	u16 data = half;
	return data;

}

//------------------------------------------------------------------------------------------------
//
//将4个u8数据按照LSB方式合成一个u32数据，然后进行累加处理
//
//------------------------------------------------------------------------------------------------
u32 AddSum(u8 * buffer , u32 Length, u32 add_sum_magic)
{
	u32 Sum = 0;
	u32 Data = 0;
	for (u32 i = 0; i < Length; i += 4)
	{
		if ((Length - i) >= 4)
		{
			Data = buffer[i] + buffer[i + 1] * 0x100 + buffer[i + 2] * 0x10000 + buffer[i + 3] * 0x1000000;
			Sum += Data;
		}
		if ((Length - i) == 3)
		{
			Data = buffer[i] + buffer[i + 1] * 0x100 + buffer[i + 2] * 0x10000 ;
			Sum = Sum + Data + add_sum_magic;
		}
		if ((Length - i) == 2)
		{
			Data = buffer[i] + buffer[i + 1] * 0x100 ;
			Sum = Sum + Data + add_sum_magic;
		}
		if ((Length - i) == 1)
		{
			Data = buffer[i] ;
			Sum = Sum + Data + add_sum_magic;
		}
	}
	return Sum;
}


//----------------------------------------------------------------------------